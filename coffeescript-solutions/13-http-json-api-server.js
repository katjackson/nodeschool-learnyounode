// Generated by CoffeeScript 1.10.0
(function() {
  var hmsFormat, http, port, unixFormat, url;

  http = require('http');

  url = require('url');

  port = process.argv[2];

  hmsFormat = function(timeObject) {
    return {
      'hour': timeObject.getHours(),
      'minute': timeObject.getMinutes(),
      'second': timeObject.getSeconds()
    };
  };

  unixFormat = function(timeObject) {
    return {
      'unixtime': timeObject.getTime()
    };
  };

  http.createServer(function(request, response) {
    var data, parsedUrl, time;
    parsedUrl = url.parse(request.url, true);
    time = new Date(parsedUrl.query.iso);
    data = (function() {
      switch (parsedUrl.pathname) {
        case '/api/parsetime':
          return hmsFormat(time);
        case '/api/unixtime':
          return unixFormat(time);
        default:
          return null;
      }
    })();
    if (data != null) {
      response.writeHead(200, {
        'Content-Type': 'application/json'
      });
      response.write(JSON.stringify(data));
      return response.end();
    } else {
      response.writeHead(404);
      return response.end();
    }
  }).listen(port);

}).call(this);
